$(document).ready(function(){function printResults(results){initPanel.remove();resultsPanel.empty();printDomainInfo(results);if(results.InsecureLinks.length||!$.isEmptyObject(results.ExternalInsecureLinks)){var table='\x3ctable\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd colspan\x3d"2"\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd width\x3d"25%"\x3e\x3cstrong\x3e'+$.translate("ssl.whynopadlock.linenumbers")+"\x3c/strong\x3e\x3c/td\x3e\x3ctd\x3e\x3cstrong\x3e"+$.translate("ssl.whynopadlock.insecurelink",1)+"\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e";
var count=0;var tmp=printInternalLinks(results,table);count+=tmp[1];tmp=printExternalLinks(results,tmp[0]);table=tmp[0];count+=tmp[1];table+='\x3ctr\x3e\x3ctd colspan\x3d"2"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e';resultsPanel.append('\x3cp class\x3d"smaller-margin"\x3e\x3cstrong\x3e'+$.translate("ssl.whynopadlock.issues",0,{"count":count})+"\x3c/strong\x3e:\x3c/p\x3e");resultsPanel.append(table)}else resultsPanel.append('\x3cdiv class\x3d"alert-box info"\x3e\x3cp class\x3d"no-margin-bottom smaller"\x3e'+
$.translate("ssl.whynopadlock.noerrors")+"\x3c/p\x3e\x3c/div\x3e")}function printDomainInfo(results){resultsPanel.append('\x3cul id\x3d"domainInfo" class\x3d"no-bullet"\x3e\x3cli\x3e\x3cstrong\x3e'+$.translate("ssl.whynopadlock.domainname")+"\x3c/strong\x3e "+results.Domain+"\x3c/li\x3e\x3cli\x3e\x3cstrong\x3e"+$.translate("ssl.whynopadlock.urltested")+"\x3c/strong\x3e "+results.URLTested+"\x3c/li\x3e\x3c/ul\x3e")}function printInternalLinks(results,table){if(results.InsecureLinks.length){var rows=
"";for(var i in results.InsecureLinks)if(results.InsecureLinks.hasOwnProperty(i))rows+="\x3ctr\x3e\x3ctd\x3e"+results.InsecureLinks[i].Line+"\x3c/td\x3e\x3ctd\x3e"+results.InsecureLinks[i].Link.replace(/>.+/g,"").replace(/\/$/g,"").replace(/"/g,"").replace(/\/$/g,"")+"\x3c/td\x3e\x3c/tr\x3e";table+=rows;return[table,results.InsecureLinks.length]}return[table,0]}function printExternalLinks(results,table){if(!$.isEmptyObject(results.ExternalInsecureLinks)){var rows="";var count=0;for(var i in results.ExternalInsecureLinks)if(results.ExternalInsecureLinks.hasOwnProperty(i)){rows+=
'\x3ctr\x3e\x3ctd colspan\x3d"2"\x3e\x3chr\x3e\x3c/td\x3e\x3c/tr\x3e';rows+='\x3ctr\x3e\x3ctd colspan\x3d"2"\x3e\x3cstrong\x3e'+$.translate("ssl.whynopadlock.FOUNDIN")+": "+i+"\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e";count+=results.ExternalInsecureLinks[i].length;for(var j in results.ExternalInsecureLinks[i])if(results.ExternalInsecureLinks[i].hasOwnProperty(j))rows+="\x3ctr\x3e\x3ctd\x3e"+$.translate("ssl.whynopadlock.insecurelink",1)+":\x3c/td\x3e\x3ctd\x3e"+results.ExternalInsecureLinks[i][j]+"\x3c/td\x3e\x3c/tr\x3e"}table+=
rows;return[table,count]}return[table,0]}var searchBar=$("#searchbar");var initPanel=$("#initPanel");var resultsPanel=$("#resultsPanel");var whyNoPadlockForm=$("#why_no_padlock_form");var recaptcha=whyNoPadlockForm.find(".captcha-wrapper");whyNoPadlockForm.prepare_form_advanced({handlers:"#padlockTrigger",disable_exception:true,version_exception:true,onSuccess:function(form){if(recaptcha.length&&parseInt($("#padlockCaptcha").css("height"))<1){searchBar.focus();return}$.ajax(new $.ajax_prototype({"url":form.attr("action"),
"timeout":18E4,"type":"POST","data":form.serialize(),"success":function(data){if(data.success)printResults(data.data);else globalApplicationErrors(data,form.attr("id"));if(recaptcha.length&&data.code!=error_codes.validation_error){recaptcha.slideUp();grecaptcha.reset(activeCaptcha[recaptcha.find(".g-recaptcha").attr("id")])}}},form.attr("id")))}});if(recaptcha.length)searchBar.on("focus",function(){recaptcha.slideDown()})});